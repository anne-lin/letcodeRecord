<div id="WA" style="display: none;">
    <div id="WA-div" class="qn" data-bind="style: {right: div_posRight, bottom: div_posBottom}, visible: div_visible">
        <div class="qn-login" data-bind="visible: !alreadyLogin()">
            <div class="qn-login-main">
                <div class="qn-logo-all"></div>
                <form data-bind="submit: login">
                    <table class="qn-login-table">
                        <tbody>
                        <tr>
                            <td>企业编号：</td>
                            <td><input type="text" class="qn-input" data-bind="value: entId, attr:{readonly: entIdReadonly}, style:{backgroundColor: entIdReadonly() ? '#eee': '#fff'}" maxlength="15"/></td>
                        </tr>
                        <tr>
                            <td>坐席工号：</td>
                            <td><input type="text" class="qn-input" data-bind="value: agentId, attr:{readonly: agentIdReadonly}, style:{backgroundColor: agentIdReadonly() ? '#eee': '#fff'}" maxlength="15" /></td>
                        </tr>
                        <tr>
                            <td>坐席密码：</td>
                            <td><input type="password" class="qn-input" data-bind="value: agentPassword, attr:{readonly:agentPasswordReadonly}, style:{backgroundColor: agentPasswordReadonly() ? '#eee': '#fff'}" maxlength="15" /></td>
                        </tr>
                        <tr>
                            <td>坐席分机：</td>
                            <td><input type="text" class="qn-input" data-bind="value: agentNumber, attr:{readonly:agentNumberReadonly}, style:{backgroundColor: agentNumberReadonly() ? '#eee': '#fff'}" maxlength="16" /></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>
                                <label for="rememberLoginInfo" style="cursor: pointer;" style="margin-right: 18px">
                                    <input id="rememberLoginInfo" type="checkbox" data-bind="checked: rememberLogin" style="vertical-align: middle;"/>记住登录信息
                                </label>
                                <label for="forceLoginCheckbox" style="cursor: pointer;">
                                    <input id="forceLoginCheckbox" type="checkbox" data-bind="checked: forceLogin" style="vertical-align: middle;"/>强制登录
                                </label>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="qn-line">
                        <button type="submit" class="qn-login-button" data-bind="enable: loginEnabled, text: loginButtonText">登录</button>
                    </div>
                </form>
                <div class="qn-line">
                    <span class="qn-message-span" data-bind="text: loginMessage"></span>
                </div>
            </div>
        </div>
        <div class="qn-main" data-bind="visible: alreadyLogin()">
            <div class="ks-dialog-shade" data-bind="visible: dialogShow()"></div>
            <div class="qn-tip" id="qn_tip"></div>
            <div class="ks-dialog" data-bind="visible: dialogShow">
                <div id="ks-choice-dialog" data-bind="visible: choiceDilogShow">
                    <!-- ko if: dialogType() == "consult" || dialogType() == "singleTransfer" -->
                    <p class="ks-dialog-title">
                        <input class="chose-item" type="radio" name="radio" value="1" data-bind="click: function(){agentGetList('1');return true;}, checked: dialogObj().isChecked"/><span data-bind="text: dialogObj().insideContent"></span>
                        <input class="chose-item" type="radio" name="radio" value="0" style="margin-left: 22px;" data-bind="checked: dialogObj().isChecked"/><span data-bind="text: dialogObj().outsideContent"></span>
                    </p>
                    <div data-bind="visible: dialogObj().isChecked() == '0'">
                        <div style="text-align: left;" data-bind="text: dialogObj().inputTitle"></div>
                        <div>
                            <input type="text" style="width: 100%;margin: 4px 0px;"  data-bind="textInput:dialogObj().toAgent"/>
                        </div>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: dialogType() == "consult" || dialogType() == "singleTransfer"  || dialogType() == "observe" -->
                    <div class="ks-list" data-bind="visible: dialogObj().isChecked() == '1' || dialogObj().handleName == 'observe'">
                        <table class="ks-table" data-bind="foreach: agentList">
                            <tr data-bind="click: $parent.selectAgent, css:{selectedItem: $parent.dialogObj().toAgent() == agentId}">
                                <td data-bind="text: agentName"></td>
                                <td data-bind="text: agentId"></td>
                                <!--<td>&nbsp;</td>-->
                            </tr>
                        </table>
                        <p data-bind="visible: !agentList().length" style="margin: 0px;line-height: 165px;">没有可<span data-bind="text: dialogObj().title"></span></p>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: dialogType() == "away" -->
                    <div class="ks-list ks-away-list">
                        <p class="ks-dialog-title">请选择小休状态</p>
                        <ul data-bind="foreach: awayStatusList">
                            <li><input type="radio" name="awayStatus" data-bind="value: statuValue, checked: $root.awayStatu, attr:{id: statuValue}"/><label data-bind="text: statuName, attr:{for: statuValue}"></label></li>
                        </ul>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: dialogType() == "assistIVR" || dialogType() == "routerToIVR"-->
                    <div>
                        <div class="ks-dialog-title ks-ivr-title">请选择IVR节点</div>
                        <div class="ks-list">
                            <table class="ks-table" data-bind="foreach: ivrNodeList">
                                <tr data-bind="click: $parent.selectIvrNode, css:{selectedItem: $parent.ivrDialogObj().toIvrNode() == $data}">
                                    <td data-bind="text: value"></td>
                                </tr>
                            </table>
                            <p data-bind="visible: !ivrNodeList().length" style="margin: 0px;line-height: 100px;">没有可选择节点</p>
                        </div>
                    </div>
                    <!-- /ko -->

                    <div class="ks-dialog-btns">
                        <button class="ks-dialog-ok" data-bind="css:{ksBtnDisabled: dialogBtnDisabled}">确定</button>
                        <button class="ks-dialog-cancle">取消</button>
                    </div>
                </div>

                <div id="ivr-confirm-dialog" data-bind="visible: ivrConfirmDialogShow">
                    <div id="ks-ivr-load" data-bind="visible: ivrConfirmDialogResult() == 'load'">
                        <div class="text">正在验密...</div>
                        <div class="ks-dialog-btns">
                            <button class="ks-dialog-ivr-return ks-dialog-ok">取消验密</button>
                        </div>
                    </div>

                    <div id="ks-ivr-success" data-bind="visible: ivrConfirmDialogResult() == 'success'">
                        <div class="text">
                            <!--<div class="icon"></div>-->
                            <span>协助成功</span>
                        </div>
                        <div class="ks-dialog-btns">
                            <button class="ks-dialog-ivr-return ks-dialog-ok">返回</button>
                        </div>
                    </div>

                    <div id="ks-ivr-fail" data-bind="visible: ivrConfirmDialogResult() == 'fail'">
                        <div class="text">
                            <!--<div class="icon"></div>-->
                            <span>协助失败</span>
                        </div>
                        <div class="ks-dialog-btns">
                            <button class="ks-dialog-ivr-return ks-dialog-ok">返回</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="qn-top">
                <table class="qn-top-table">
                    <tbody>
                    <tr>
                        <td style="width: 20%"><span data-bind="text: agentId"></span><br /> <span data-bind="text: stateShow"></span></td>
                        <td><div class="qn-button qn-button-head" data-bind="click: setReady">
                            <div class="qn-button-img-thin"
                                 data-bind="css: {'qn-button-ready' : readyEnabled(), 'qn-button-ready-disable' : !readyEnabled()}"></div>
                            置闲
                        </div></td>
                        <td><div class="qn-button qn-button-head" data-bind="click: setBusy">
                            <div class="qn-button-img-thin"
                                 data-bind="css: {'qn-button-busy' : busyEnabled(), 'qn-button-busy-disable' : !busyEnabled()}"></div>
                            置忙
                        </div></td>
                        <td><div class="qn-button qn-button-head" data-bind="click: setAway">
                            <div class="qn-button-img-thin"
                                 data-bind="css: {'qn-button-away' : awayEnabled(), 'qn-button-away-disable' : !awayEnabled()}"></div>
                            小休
                        </div></td>
                        <td><div class="qn-button qn-button-head" data-bind="click: logout">
                            <div class="qn-button-img-thin"
                                 data-bind="css: {'qn-button-logout' : logoutEnabled(), 'qn-button-logout-disable' : !logoutEnabled()}"></div>
                            登出
                        </div></td>
                        <td>
                            <span class="qn-input qn-input-head" data-bind="text: callDurationShow"></span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="qn-middle">
                <div class="qn-line" data-bind="visible: outCallNumberVisible">
                    呼叫号码：<input id="outCallNumberInput" type="text" maxlength="16" class="qn-input bold" data-bind="textInput: callNumber" />
                </div>
                <div class="qn-line" data-bind="visible:outNumbersVisible">
                    <!-- ko if: outNumbers().length == 0 -->
                    外显号码：<select class="qn-input bold"><option data-bind='text: agentNumber'></option></select>
                    <!-- /ko -->
                    <!-- ko if: outNumbers().length > 0 -->
                    外显号码：<select class="qn-input bold" data-bind="options: outNumberWa, value: disNumberWa , event:{change:chooseDisnum}"></select>
                    <!-- /ko -->
                </div>
            </div>
            <div class="qn-command">
                <table class="qn-command-table">
                    <tbody>
                    <tr data-bind="visible: callConsultVisible">
                        <td><div class="qn-button" data-bind="click: makeCall">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-call' : callEnabled(), 'qn-button-call-disable' : !callEnabled()}"></div>
                            外呼
                        </div></td>
                        <td><div class="qn-button" data-bind="click: makeCallInternal">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-call' : callInternalEnabled(), 'qn-button-call-disable' : !callInternalEnabled()}"></div>
                            内呼
                        </div></td>
                        <td><div class="qn-button" data-bind="click: hangup">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-hangup' : hangupEnabled(), 'qn-button-hangup-disable' : !hangupEnabled()}"></div>
                            挂断
                        </div></td>
                        <td><div class="qn-button" data-bind="click: hold">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-keep' : holdEnabled(), 'qn-button-keep-disable' : !holdEnabled()}"></div>
                            保持
                        </div></td>
                        <td><div class="qn-button" data-bind="click: holdReturn">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-keep-return' : holdReturnEnabled(), 'qn-button-keep-return-disable' : !holdReturnEnabled()}"></div>
                            保持接回
                        </div></td>
                    </tr>
                    <tr data-bind="visible: callConsultVisible">
                        <td><div class="qn-button" data-bind="click: consult">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-consult' : consultEnabled(), 'qn-button-consult-disable': !consultEnabled()}"></div>
                            咨询
                        </div></td>
                        <td><div class="qn-button" data-bind="click: consultReturn">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-consult-return' : consultReturnEnabled(), 'qn-button-consult-return-disable' : !consultReturnEnabled()}"></div>
                            咨询接回
                        </div></td>
                        <td><div class="qn-button" data-bind="click: transfer">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-transfer' : transferEnabled(), 'qn-button-transfer-disable' : !transferEnabled()}"></div>
                            转移
                        </div></td>
                        <td><div class="qn-button" data-bind="click: singleTransfer">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-transfer': singleTransferEnabled(), 'qn-button-transfer-disable': !singleTransferEnabled()}"></div>
                            单步转移
                        </div></td>
                        <td><div class="qn-button" data-bind="click: conference">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-meeting' : conferenceEnabled(), 'qn-button-meeting-disable' : !conferenceEnabled()}"></div>
                            会议
                        </div></td>
                    </tr>
                    <tr>
                        <td><div class="qn-button" data-bind="click: function(){observe(2)}">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-observe' : observeEnabled(), 'qn-button-observe-disable' : !observeEnabled()}"></div>
                            监听
                        </div></td>
                        <td><div class="qn-button" data-bind="click: forceInsert">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-force-insert' : insertEnabled(), 'qn-button-force-insert-disable' : !insertEnabled()}"></div>
                            强插
                        </div></td>
                        <td><div class="qn-button" data-bind="click: forceAbort">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-force-abort' : forceAbortEnabled(), 'qn-button-force-abort-disable' : !forceAbortEnabled()}"></div>
                            强拆
                        </div></td>
                        <td><div class="qn-button" data-bind="click: fullAbort">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-force-abort' : fullAbortEnabled(), 'qn-button-force-abort-disable' : !fullAbortEnabled()}"></div>
                            全拆
                        </div></td>
                        <td><div class="qn-button" data-bind="click: reset">
                            <div class="qn-button-img"
                                 data-bind="css: {'qn-button-reset' : resetEnabled(), 'qn-button-reset-disable' : !resetEnabled()}"></div>
                            重置
                        </div></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div>
        <i id="WA-icon" class="fa fa-phone-square qn-icon" style="font-size: 46px;" data-bind="style: {right: icon_posRight, bottom: icon_posBottom}, colorBlink: colors, interval: icon_interval"></i>
    </div>
</div>
